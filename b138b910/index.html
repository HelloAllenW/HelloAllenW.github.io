<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="referrer" content="no-referrer" />

    <meta name="author" content="Allen">


    <meta name="subtitle" content="ç»¿è¡£æ§ç šå‚¬é¢˜å·ï¼Œçº¢è¢–æ·»é¦™ä¼´è¯»ä¹¦">




<title>ä»é›¶å¼€å§‹å­¦ä¹ Vue3æºç  ï¼ˆä¸€ã€æ­å»ºç¯å¢ƒï¼‰ | é˜¿ä¼¦çš„ä¸ªäººåšå®¢</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



<!-- ç™¾åº¦ç»Ÿè®¡ï¼Œåœ¨head.ejsä¸­å¼•å…¥ -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?4089b5476d9d7b1fbf81de2841dc180c";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    


<!-- æœç´¢ -->
<div id="algolia-search">
  <div class="search-dialog">  
    <nav class="search-nav">
      <span class="search-dialog-title">Search</span>
      <button class="search-close-button">
        <span class="iconfont icon-guanbi"></span>
      </button>
    </nav>
  
    <div class="search-wrap">
      <div id="algolia-search-input"></div>
      <hr />  
      <div id="algolia-search-results">
        <div id="algolia-hits"></div>
        <div id="algolia-pagination"></div>
        <div id="algolia-info">
          <div class="algolia-stats"></div>
          <div class="algolia-poweredBy"></div>
        </div>
      </div>
    </div>
  </div>
  
  <div id="search-mask"></div>
  
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.66.1/dist/instantsearch.production.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/algoliasearch/4.23.2/algoliasearch-lite.umd.js"></script>
  <script src="/js/utils.js"></script>
  <script src="/js/algolia.js"></script>
</div>



    
    
        
    


<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="é˜¿ä¼¦çš„ä¸ªäººåšå®¢" type="application/atom+xml">
</head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
            } else {
                pagebody.classList.remove('dark-theme');
            }
            // mobile
            if (document.getElementById("mobile-toggle-theme")) {
                document.getElementById("mobile-toggle-theme").innerText = isDark ? "Â· Dark" : "Â· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Allen&#39;s Blog</a></div>
            <div class="menu navbar-right">
                <!-- å…¶ä»–çš„å¯¼èˆª -->
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                

                <!-- Search -->
                <span id="search-button" style="padding: 0 8px;cursor: pointer;">
                    <span class="search">Search</span>
                </span>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Allen&#39;s Blog</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // ä¸º 6 æ—¶å±•å¼€æ‰€æœ‰
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // è¿™ä¸ªå€¼æ˜¯ç”± tocbot æºç é‡Œå®šä¹‰çš„ scrollSmoothDuration å¾—æ¥çš„
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">ä»é›¶å¼€å§‹å­¦ä¹ Vue3æºç  ï¼ˆä¸€ã€æ­å»ºç¯å¢ƒï¼‰</h1>
            
                <div class="post-meta">
                    
                    <!-- 
                        Author: <a itemprop="author" rel="author" href="/">Allen</a>
                     -->

                    
                        <span class="post-time">
                        
                        <!-- Date: <a href="#">ä¸‰æœˆ 16, 2023&nbsp;&nbsp;10:50:10</a> -->
                        <span class="iconfont icon-date1"></span>
                        ä¸‰æœˆ 16, 2023
                        </span>
                    
                    &nbsp;  &nbsp;
                    
                        <span class="post-category">
                            <span class="iconfont icon-icon-goodscategory"></span>
                            
                                <a href="/categories/Web%E5%89%8D%E7%AB%AF/">Webå‰ç«¯</a>
                            
                        </span>
                    
                    <!-- å±•ç¤ºå½“å‰æ–‡ç« æ‰€å±tags -->
                    
                    &nbsp;  &nbsp;
                    <span class="iconfont icon-tags"></span>
                        <span>
                            
                                <a href="/tags/Vue/">Vue </a>&nbsp;
                            
                        </span>
                    
                    
                    
                        <!-- æ–‡ç« å­—æ•°å’Œé˜…è¯»æ—¶é—´ -->
<div style="display: inline;">
  <!-- &nbsp; | &nbsp; -->
  &nbsp;  &nbsp;
  <span class="post-time">
    <span class="post-meta-item-icon">
      <span class="iconfont icon-post"></span>
      <!-- <span class="post-meta-item-text">  Count: </span> -->
      <span class="post-count">3.5k Words</span>
    </span>
  </span>
  <!-- &nbsp; | &nbsp; -->
  &nbsp;  &nbsp;
  <span class="post-time">
    <span class="post-meta-item-icon">
      <span class="iconfont icon-time"></span>
      <!-- <span class="post-meta-item-text">  Time: </span> -->
      <span class="post-count">13 min</span>
    </span>
  </span>
</div>

                    
                </div>
            
        </header>

        <div class="post-content">
            <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Vue3æ­£å¼ç‰ˆå‘å¸ƒæ²¡å¤šä¹…ï¼Œå½“åˆèµ¶ä¸Šå…¬å¸åœ¨æ‹†åˆ†é¡¹ç›®ï¼Œå¾ˆå¤šæ¨¡å—éƒ½è¢«æ‹†åˆ†æˆäº†å•ç‹¬çš„å­é¡¹ç›®ï¼Œåˆšå¥½ç”±æˆ‘æ¥è´Ÿè´£é¡¹ç›®çš„æŠ€æœ¯é€‰å‹å’Œæ­å»ºï¼Œä¹‹å‰çš„é¡¹ç›®å›¢é˜Ÿéƒ½æ˜¯<code>Vue2</code>æ¥å¼€å‘çš„ï¼Œ<code>Vue2</code>çš„ä¸€äº›ä¸è¶³å°±ä¸å¤šè¯´äº†ï¼Œæœ¬æ¥æ–°é¡¹ç›®æƒ³ç›´æ¥ä¸Š<code>react</code>ï¼Œè¾¹å¼€å‘è¾¹å­¦ä¹ çš„ï¼Œä½†æ˜¯è€ƒè™‘åˆ°äº†åè¾¹å¾ˆå¯èƒ½æœ‰å…¶ä»–åŒäº‹æ¥æ¥æ‰‹ï¼Œå¦‚æœéƒ½æ˜¯<code>react</code>ä»£ç ï¼Œå­¦ä¹ çš„æˆæœ¬å°±ä¼šè¾ƒå¤§ï¼Œåˆšå¥½<code>Vue3</code>ä¹Ÿå‘æ­£å¼ç‰ˆäº†ï¼Œç´¢æ€§å°±ç›´æ¥ä¸Š<code>Vue3</code>ï¼Œå¦‚æœåªæ˜¯å†™å†™ä¸šåŠ¡çš„è¯ï¼Œ<code>Vue2</code>è½¬<code>Vue3</code>ï¼ŒåŸºæœ¬ä¸Šçœ‹çœ‹æ–‡æ¡£å‡ å¤©å°±èƒ½å¤Ÿä¸Šæ‰‹ç›´æ¥ä¸€æŠŠæ¢­ã€‚</p>
<p><code>Vue3</code>ç”¨äº†ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä½†æ˜¯å¯¹äºå…¶åŸç†å’Œä¸€äº›æ–°ç©æ³•æ–°èŠ±æ ·ï¼Œè¿˜æ˜¯æ²¡æœ‰å®Œå…¨åƒé€ï¼Œå°±åƒé—®ï¼š<code>Vue2</code>å’Œ<code>Vue3</code>å“åº”å¼åŸç†æœ‰å•¥ä¸åŒï¼Ÿç­”ï¼š<code>Vue2</code>ç”¨çš„æ˜¯<code>Object.defineProperty</code>ï¼Œ<code>Vue3</code>ç”¨çš„æ˜¯<code>Proxy</code>ï¼Œç„¶åå°±æ²¡æœ‰ç„¶åäº†ï¼Œå®Œå…¨ç»ä¸ä½æ·±æŒ–ã€‚ä¹‹å‰ä¹Ÿçœ‹è¿‡<code>Vue2</code>çš„åŸç†ï¼Œç»è¿‡è¿™å°ä¸¤å¹´æ—¶é—´çš„æ´—ç¤¼ï¼ŒåŸºæœ¬ä¸Šå·²ç»å¿˜äº†ä¸ªä¸ƒä¸ƒå…«å…«ï¼Œæ‰€ä»¥è¶ç€ç°åœ¨æ­£åœ¨å†™é‡å­¦å‰ç«¯è¿™ä¸€ç³»åˆ—æ–‡ç« ï¼Œé‚£ä¹ˆ<code>Vue3</code>åŸç†è¿™å—ï¼Œä¹Ÿæ‰“ç®—å°½æ—©æä¸Šæ—¥ç¨‹ï¼Œå’Œä¹‹å‰çš„é‚£äº›æ–‡ç« ä¸€æ ·ï¼Œæˆ‘ä¾æ—§ä¼šç”¨æœ€é€‚åˆå°ç™½çš„æ–‡å­—ï¼Œæ¥æ…¢æ…¢è®²è§£ï¼ŒåŒæ—¶å¯¹æˆ‘æ¥è¯´ï¼Œæ¯æ¬¡å†™ä¸€ç¯‡æ–‡ç« éƒ½æ˜¯ä¸€æ¬¡æ–°çš„å­¦ä¹ ï¼Œé‚£æˆ‘ä»¬å°±å¼€å§‹å§ï¼</p>
<h2 id="å­¦å®Œæœ¬ç¯‡æ–‡ç« ä½ èƒ½æ”¶è·åˆ°"><a href="#å­¦å®Œæœ¬ç¯‡æ–‡ç« ä½ èƒ½æ”¶è·åˆ°" class="headerlink" title="å­¦å®Œæœ¬ç¯‡æ–‡ç« ä½ èƒ½æ”¶è·åˆ°"></a>å­¦å®Œæœ¬ç¯‡æ–‡ç« ä½ èƒ½æ”¶è·åˆ°</h2><ul>
<li>ä»€ä¹ˆæ˜¯<code>Monorepo</code>ï¼›</li>
<li><code>pnpm</code>çš„åŸºæœ¬æ¦‚å¿µä»¥åŠç®€å•ç”¨æ³•ï¼Œä½¿ç”¨<code>pnpm</code>æ­å»º<code>Monorepo</code>ç¯å¢ƒï¼›</li>
<li><code>Vue3</code>ç»„æˆçš„ç®€ä»‹ï¼Œå®ç°è‡ªå·±çš„<code>Vue3</code>çš„æ­å»ºï¼›</li>
</ul>
<h2 id="Vue3è®¾è®¡æ€æƒ³çš„å˜åŒ–"><a href="#Vue3è®¾è®¡æ€æƒ³çš„å˜åŒ–" class="headerlink" title="Vue3è®¾è®¡æ€æƒ³çš„å˜åŒ–"></a>Vue3è®¾è®¡æ€æƒ³çš„å˜åŒ–</h2><p>æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹<code>Vue3</code>å’Œ<code>Vue2</code>åœ¨å“ªäº›è®¾è®¡æ–¹é¢æœ‰äº†å¾ˆå¤§çš„å˜åŒ–ï¼š</p>
<ul>
<li><code>Vue3</code>å°†å¾ˆå¤šåŠŸèƒ½éƒ½è®¾è®¡æˆäº†å•ç‹¬çš„æ¨¡å—ï¼Œæ¯”å¦‚å¯ä»¥ç›´æ¥<code>import &#123; ref, reactive &#125; from &#39;vue&#39;</code>ä½¿ç”¨å“åº”å¼çš„æ–¹æ³•ï¼Œæ¨¡å—é—´è€¦åˆåº¦ä½ï¼Œå¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼›è€Œ<code>Vue2</code>æ²¡åŠæ³•å•ç‹¬ä½¿ç”¨éƒ¨åˆ†æ¨¡å—ï¼Œå°±ç®—åªç”¨åˆ°äº†å“åº”å¼çš„éƒ¨åˆ†ï¼Œä¹Ÿåªèƒ½å¼•å…¥å®Œæ•´çš„<code>Vuejs</code>ã€‚</li>
<li><code>Vue2</code>å¾ˆå¤šçš„æ–¹æ³•ï¼Œéƒ½æ˜¯ç›´æ¥æŒ‚è½½åˆ°<code>vm</code>ä¹Ÿå°±æ˜¯å®ä¾‹ä¸Šäº†ï¼Œå¯¼è‡´æ²¡ä½¿ç”¨çš„è¿™äº›æ–¹æ³•ï¼Œä¹Ÿä¼šè¢«æ‰“åŒ…è¿›æœ€ç»ˆçš„æ‰“åŒ…æ–‡ä»¶ä¸­ï¼›<code>Vue3</code>ä¸­çš„åŠŸèƒ½ï¼Œå› ä¸ºè¿›è¡Œäº†æ¨¡å—æ‹†åˆ†ï¼Œéƒ½æ˜¯å‡½æ•°å¼<code>API</code>ï¼Œæ‰€ä»¥æ‰“åŒ…çš„æ—¶å€™åˆ©ç”¨<code>Tree-shaking</code>æœºåˆ¶ï¼Œåšåˆ°äº†æŒ‰éœ€å¼•å…¥ï¼Œæœ‰æ•ˆçš„å‡å°‘æ‰“åŒ…çš„ä½“ç§¯ã€‚</li>
<li><code>Vue3</code>å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼Œå¢å¼ºäº†æ‰©å±•èƒ½åŠ›ï¼Œæš´éœ²äº†å¾ˆå¤šçš„æ–¹æ³•ï¼Œå¯ä»¥è¿›è¡Œè‡ªå®šä¹‰é€»è¾‘ï¼›è€Œåœ¨ä¸€äº›è·¨å¹³å°çš„æ¡†æ¶ä¸­æ¯”å¦‚å°ç¨‹åºï¼Œå¦‚æœæƒ³ä½¿ç”¨<code>Vue2</code>ä½œä¸ºæŠ€æœ¯æ ˆï¼Œåˆ™éœ€è¦åœ¨<code>Vue2</code>çš„æºç åŸºç¡€ä¸Šï¼Œæ”¹åŠ¨æºç çš„é€»è¾‘ï¼Œæ‰èƒ½è¿›è¡Œæ‰“åŒ…ï¼Œè¿™ç›¸å½“äºç ´åäº†æºç ï¼Œéšç€æ›´æ–°ä¹Ÿä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚</li>
</ul>
<h2 id="æ­å»ºå¼€å‘ç¯å¢ƒ"><a href="#æ­å»ºå¼€å‘ç¯å¢ƒ" class="headerlink" title="æ­å»ºå¼€å‘ç¯å¢ƒ"></a>æ­å»ºå¼€å‘ç¯å¢ƒ</h2><p>ä¸€ä¸Šæ¥å¦‚æœå°±å¸¦ç€å¤§å®¶å»çœ‹æºç ï¼Œç›¸ä¿¡æ²¡æœ‰å¤šå°‘äººèƒ½å¤Ÿæ¥æ”¶ï¼Œç›´æ¥å°±æŠŠæ–‡ç« passæ‰äº†ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆè‡ªå·±ç®€å•å®ç°<code>Vue3</code>çš„åŸç†ï¼Œå®ç°ä¸€ä¸ªç®€ç‰ˆçš„<code>Vue3</code>ï¼Œä¹‹åæˆ‘ä»¬å†å»è°ƒè¯•æºç ï¼Œå†å»çœ‹ï¼Œå°±ä¼šå˜å¾—æ²¡é‚£ä¹ˆå›°éš¾å’Œéš¾ä»¥æ¥å—äº†ã€‚æˆ‘ä»¬å…ˆæ­å»ºä¸€ä¸ªå¼€å‘ç¯å¢ƒã€‚æˆ‘ä»¬è¦ä½¿ç”¨<code>Monorepo</code>çš„æ–¹å¼æ¥æ­å»ºæ•´ä¸ªé¡¹ç›®ï¼Œé‚£ä»€ä¹ˆæ˜¯<code>Monorepo</code>å‘¢ï¼Ÿ</p>
<p><code>Monorepo</code>æ˜¯ç›®å‰å¾ˆå¤šå¤§å‹å¼€æºé¡¹ç›®ï¼Œç®¡ç†ä»£ç çš„ä¸€ä¸ªæ–¹å¼ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ª<code>git</code>é¡¹ç›®ä»“åº“ä¸­ç®¡ç†å¤šä¸ªæ¨¡å—æˆ–è€…å·¥å…·åŒ…ã€‚<code>Vue3</code>çš„æºç å°±æ˜¯é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œå°†æ¨¡å—æ‹†åˆ†åˆ°<code>package</code>ç›®å½•ä¸­ï¼Œé‚£ä¹ˆå¥½å¤„å°±æ˜¯ï¼š</p>
<ul>
<li>ä¸€ä¸ªä»“åº“å¯ç»´æŠ¤å¤šä¸ªæ¨¡å—æˆ–å·¥å…·åŒ…ï¼Œä¸ç”¨åˆ°å¤„æ‰¾å„è‡ªçš„ä»“åº“ã€‚</li>
<li>æ–¹ä¾¿æ¯ä¸ªæ¨¡å—çš„ç‰ˆæœ¬ç®¡ç†å’Œä¾èµ–ç®¡ç†ï¼Œæ¨¡å—ä¹‹é—´çš„å¼•ç”¨å’Œè°ƒç”¨å˜çš„ååˆ†æ–¹ä¾¿ã€‚</li>
</ul>
<p>æˆ‘ä»¬ä½¿ç”¨<code>pnpm</code>è¿™ä¸ªå·¥å…·ï¼Œæ¥æ­å»º<code>Monorepo</code>ç¯å¢ƒã€‚ç®€å•è¯´ä¸‹<code>pnpm</code>æ˜¯ä¸ªå•¥ï¼Œå…¶å®å°±æ˜¯ä¸ªåŒ…ç®¡ç†å·¥å…·ï¼Œç‰¹ç‚¹å°±æ˜¯éå¸¸å¿«ï¼Œå¹¶ä¸”èƒ½èŠ‚çœç£ç›˜ç©ºé—´ã€‚å¤§ä½“çš„ä½¿ç”¨æ–¹æ³•å’Œ<code>npm</code>æ²¡å•¥åŒºåˆ«ï¼Œå…·ä½“ç»†èŠ‚å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬è¿™é‡Œç›´æ¥ç”¨ï¼Œä¸æ¥ç»†è¯´ã€‚</p>
<p>ä¸Šæ–‡è¯´åˆ°<code>Vue3</code>é‡‡ç”¨çš„æ˜¯<code>Monorepo</code>è¿™ç§æ–¹å¼ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦å¤§è‡´å†™ä¸€ä¸‹<code>Vue3</code>ä¸­åŒ…å«çš„å„ç§åŒ…ï¼Œå°±èƒ½å®ç°ä¸€ä¸ªç®€å•ç‰ˆæœ¬çš„<code>Vue3</code>äº†ã€‚å¸¸è§çš„åŒ…æœ‰ï¼š</p>
<ul>
<li><p><code>reactivity</code>ï¼šå“åº”å¼ç³»ç»Ÿ</p>
</li>
<li><p><code>compiler-core</code>ï¼šç¼–è¯‘æ ¸å¿ƒ</p>
</li>
<li><p><code>compiler-dom</code>ï¼šé’ˆå¯¹æµè§ˆå™¨çš„ç¼–è¯‘æ¨¡å—</p>
<p>â€¦â€¦</p>
</li>
</ul>
<h3 id="ç”Ÿæˆé¡¹ç›®çš„åŸºæœ¬æ¶æ„"><a href="#ç”Ÿæˆé¡¹ç›®çš„åŸºæœ¬æ¶æ„" class="headerlink" title="ç”Ÿæˆé¡¹ç›®çš„åŸºæœ¬æ¶æ„"></a>ç”Ÿæˆé¡¹ç›®çš„åŸºæœ¬æ¶æ„</h3><p>é¦–å…ˆï¼Œå¦‚æœæ²¡æœ‰å®‰è£…è¿‡<code>pnpm</code>ï¼Œéœ€è¦å…¨å±€å®‰è£…ï¼Œè¿™é‡Œä½¿ç”¨<code>npm install pnpm -g</code>è¿™ä¸ªæ–¹å¼æ¥å®‰è£…ï¼›ä¹‹å<code>mkdir vue3-source-code</code>æ¥åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œä½¿ç”¨<code>pnpm init -y</code>å‘½ä»¤ï¼Œåˆå§‹åŒ–<code>package.json</code>æ–‡ä»¶ã€‚ä¹‹åæˆ‘ä»¬åˆ›å»ºå¦‚ä¸‹æ‰€ç¤ºçš„ç›®å½•ç»“æ„ï¼š</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vue3-source-code</span><br><span class="line"><span class="code">             â€”â€”| packagesæ–‡ä»¶å¤¹ // å­˜æ”¾Vue3ç›¸å…³çš„æ‰€æœ‰åŒ…</span></span><br><span class="line"><span class="code">                             |â€”â€” reactivityæ–‡ä»¶å¤¹ // å“åº”å¼åŸç†çš„åŒ…</span></span><br><span class="line"><span class="code">                                 |â€”â€” src</span></span><br><span class="line"><span class="code">                                     |â€”â€” index.ts // å…¥å£æ–‡ä»¶ä»£ç </span></span><br><span class="line"><span class="code">                             |â€”â€” sharedæ–‡ä»¶å¤¹ // å­˜æ”¾ä¸€äº›å…¬å…±æ–¹æ³•çš„åŒ…</span></span><br><span class="line"><span class="code">                                 |â€”â€” src</span></span><br><span class="line"><span class="code">                                     |â€”â€” index.ts // å…¥å£æ–‡ä»¶ä»£ç </span></span><br><span class="line"><span class="code">             â€”â€”| scriptsæ–‡ä»¶å¤¹ // å­˜æ”¾æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸€äº›è„šæœ¬</span></span><br><span class="line"><span class="code">             â€”â€”| .npmrc // npmé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="code">             â€”â€”| package.json</span></span><br><span class="line"><span class="code">             â€”â€”| pnpm-workspace.yaml // ç®¡ç†workspaceçš„é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹å®Œå–„é…ç½®é¡¹å’Œä¸€äº›è°ƒè¯•ä»£ç ï¼Œè®©é¡¹ç›®èƒ½å¤Ÿè·‘çš„é€šï¼š åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œä½¿ç”¨<code>tsc --init</code>å‘½ä»¤ï¼Œæ¥åˆå§‹åŒ–<code>tsconfig.json</code>æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…è¿‡<code>tsc</code>ï¼Œéœ€è¦å…ˆå…¨å±€æ‰§è¡Œ<code>npm install typescript -g</code>å‘½ä»¤ã€‚æˆ‘ä»¬ç›´æ¥æŠŠä»¥ä¸‹é…ç½®å¡«å†™åœ¨<code>tsconfig.json</code>æ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ts.config.jsonæ–‡ä»¶</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;outDir&quot;</span>: <span class="string">&quot;dist&quot;</span>, <span class="comment">// è¾“å‡ºçš„ç›®å½•</span></span><br><span class="line">    <span class="string">&quot;sourceMap&quot;</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨sourcemap</span></span><br><span class="line">    <span class="string">&quot;target&quot;</span>: <span class="string">&quot;es2016&quot;</span>, <span class="comment">// ç›®æ ‡è¯­æ³•</span></span><br><span class="line">    <span class="string">&quot;module&quot;</span>: <span class="string">&quot;esnext&quot;</span>, <span class="comment">// æ¨¡å—æ ¼å¼ä¸ºesm</span></span><br><span class="line">    <span class="string">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>, <span class="comment">// æ¨¡å—è§£ææ–¹å¼</span></span><br><span class="line">    <span class="string">&quot;strict&quot;</span>: <span class="literal">false</span>, <span class="comment">// ä¸¥æ ¼æ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨any</span></span><br><span class="line">    <span class="string">&quot;resolveJsonModule&quot;</span>: <span class="literal">true</span>, <span class="comment">// è§£æjsonæ¨¡å—</span></span><br><span class="line">    <span class="string">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span>, <span class="comment">// å…è®¸é€šè¿‡es6è¯­æ³•å¼•å…¥commonjsæ¨¡å—</span></span><br><span class="line">    <span class="string">&quot;jsx&quot;</span>: <span class="string">&quot;preserve&quot;</span>, <span class="comment">// jsx ä¸è½¬ä¹‰</span></span><br><span class="line">    <span class="string">&quot;lib&quot;</span>: [<span class="string">&quot;esnext&quot;</span>, <span class="string">&quot;dom&quot;</span>], <span class="comment">// æ”¯æŒçš„ç±»åº“ esnextåŠdom</span></span><br><span class="line">    <span class="string">&quot;baseUrl&quot;</span>: <span class="string">&quot;./&quot;</span>,</span><br><span class="line">    <span class="string">&quot;paths&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;@vue/*&quot;</span>: [<span class="string">&quot;packages/*/src&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¿ƒç»†çš„æœ‹å‹å¯èƒ½å‘ç°ï¼Œæœ€åä¸¤ä¸ªé…ç½®é¡¹æ²¡æœ‰æ³¨é‡Šï¼Œæˆ‘ä»¬ä¸€ä¼šå†æ¥è§£é‡Šè¿™ä¸¤ä¸ªé…ç½®é¡¹çš„ä½œç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .npmrcæ–‡ä»¶</span></span><br><span class="line">shamefully-hoist = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªé…ç½®é¡¹éå¸¸æœ‰æ„æ€ï¼Œæˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹è¿™ä¸ªé…ç½®é¡¹æ˜¯å•¥æ„æ€å‘¢ï¼Ÿé‚£ä¹ˆè¿™é‡Œä¸å¾—ä¸æåŠä¸€ä¸‹<code>npm</code>åœ¨å®‰è£…ä¾èµ–æ—¶å€™çš„ç‰¹å¾äº†ï¼šé‚£å°±æ˜¯<strong>ä¼šå°†ä¾èµ–æ‹å¹³åœ¨node_modulesæ–‡ä»¶å¤¹ä¸­</strong>ï¼Œè€Œ<code>pnpm</code>åœ¨å®‰è£…ä¾èµ–ä¹‹åï¼Œåˆ™ä¸ä¼šå°†ä¾èµ–æ‹å¹³åœ¨<code>node_modules</code>æ–‡ä»¶å¤¹ä¸­ã€‚ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œåœ¨ä¸€ä¸ªç©ºç™½é¡¹ç›®ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†<code>npm install webpack</code>å‘½ä»¤ï¼Œé‚£ä¹ˆå½“ä½ æ‰“å¼€<code>node_modules</code>æ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œä¼šå‘ç°å®‰è£…äº†ä¸€å¤§å †ä¾èµ–ï¼Œæ­¤æ—¶æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨<code>require(&#39;express&#39;)</code>ï¼Œå‘ç°ä¾æ—§ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºåœ¨å®‰è£…<code>webpack</code>çš„æ—¶å€™ï¼Œä¹Ÿç”¨åˆ°äº†<code>express</code>è¿™ä¸ªä¾èµ–ï¼Œè€Œä¸”éƒ½æ‹å¹³åœ¨<code>node_modules</code>æ–‡ä»¶å¤¹ä¸‹äº†ï¼Œæ‰€ä»¥åœ¨é¡¹ç›®ä¸­<code>require(&#39;express&#39;)</code>æ˜¯èƒ½å¤Ÿæ‰¾åˆ°ï¼Œè€Œä¸”ä¸ä¼šæŠ¥é”™çš„ï¼›ä½†æœæˆ‘ä»¬ä½¿ç”¨<code>pnpm install webpack</code>çš„è¯ï¼Œæ­¤æ—¶å†æ‰“å¼€<code>node_modules</code>æ–‡ä»¶ï¼Œä¼šå‘ç°å°‘äº†å¾ˆå¤šä¸œè¥¿ï¼Œè§‚å¯Ÿç›®å½•ç»“æ„ä¼šå‘ç°ï¼Œå…¶å®ä¾èµ–éƒ½è¢«æ”¾åœ¨äº†<code>.pnpm</code>è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œæ­¤æ—¶å¦‚æœæˆ‘ä»¬ç›´æ¥<code>require(&#39;express&#39;)</code>ï¼Œåˆ™å°±ä¼šæŠ¥é”™ï¼Œå› ä¸º<code>node_modules</code>ç›®å½•ä¸‹ï¼Œæ ¹æœ¬ä¸å­˜åœ¨<code>express</code>æ¨¡å—ã€‚é‚£ä¹ˆï¼Œåœ¨<code>.npmrc</code>æ–‡ä»¶ä¸­åŠ å…¥äº†<code>shamefully-hoist = true</code>è¿™ä¸ªé…ç½®é¡¹ï¼Œå°±èƒ½å¤Ÿå°†<code>.pnpm</code>ä¸­çš„ä¾èµ–ï¼Œæ‹å¹³åœ¨<code>node_modules</code>æ–‡ä»¶å¤¹ä¸­ï¼Œè¾¾åˆ°çš„æ•ˆæœå°±å’Œ<code>npm</code>å¾ˆç±»ä¼¼äº†ã€‚</p>
<p>æ¥ä¸‹æ¥<code>cd</code>è¿›å…¥<code>shared</code>ç›®å½•ï¼Œä½¿ç”¨<code>pnpm init -y</code>å‘½ä»¤åˆå§‹åŒ–ï¼Œå¹¶å°†<code>package.json</code>æ–‡ä»¶ä¸­é…ç½®é¡¹æ”¹ä¸º<code>&quot;name&quot;: &quot;@vue/shared&quot; ......</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// shared/src/index.ts æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å…ˆå†™ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„çš„æ–¹æ³•ï¼Œå¹¶å°†å…¶å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">isArray</span> = value =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">isArray</span>(value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒæ ·çš„æ–¹æ³•ï¼Œ<code>cd</code>è¿›å…¥<code>reactivity</code>ç›®å½•ä¸‹ï¼Œä½¿ç”¨<code>pnpm init -y</code>å‘½ä»¤åˆå§‹åŒ–ï¼Œå¹¶å°†<code>package.json</code>æ–‡ä»¶ä¸­é…ç½®é¡¹æ”¹ä¸º<code>&quot;name&quot;: &quot;@vue/reactivity&quot; ......</code>ã€‚æ¥ä¸‹æ¥ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨<code>reactivity/src/index.ts</code>æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨<code>shared</code>åŒ…ä¸­æš´éœ²å‡ºæ¥çš„é‚£ä¸ª<code>isArray</code>æ–¹æ³•ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•å¼•å…¥å‘¢ï¼Ÿé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯æˆ‘ç›´æ¥<code>import &#123; isArray &#125; from &#39;../../shared/src/index.ts&#39;</code>ä¸å°±å®Œäº†ä¹ˆï¼Œç›¸å¯¹è·¯å¾„ä¸€æŠŠæ¢­ï¼Œä¹çœ‹ä¸€çœ¼æ²¡å•¥é—®é¢˜ï¼Œä½†æ˜¯ç¨å¾®ä¸€æƒ³ï¼Œåƒ<code>sharedï¼Œreactivity</code>è¿™ç§åŒ…ï¼Œæœ€åå‘å¸ƒå¯æ˜¯è¦æ‰“åŒ…å®Œåï¼Œå•ç‹¬å‘å¸ƒåˆ°<code>npm</code>ä¸Šè¾¹çš„ï¼Œè¿™æ—¶å€™ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œé‚£è‚¯å®šå°±ä¸å¤ªåˆé€‚äº†å§ã€‚æœ‰æœ‹å‹åˆä¼šè¯´äº†ï¼Œé‚£ç›´æ¥ç”¨<code>import &#123; isArray &#125; from &#39;@vue/shared&#39;</code>æ¥å¯¼å…¥ä¸å°±å¥½äº†ä¹ˆï¼Ÿæ²¡é”™ï¼Œä½†æ˜¯å¦‚æœä¸è¿›è¡Œä»»ä½•é…ç½®ï¼Œè¿™ç§å†™æ³•æ˜¯å»å“ªé‡Œæ‰¾<code>@vue/shared</code>çš„è¿™ä¸ªåŒ…å‘¢ï¼Ÿ<code>node_modules</code>ç›®å½•ä¸­ï¼Œé‚£<code>node_modules</code>ç›®å½•ä¸­æ²¡æœ‰è¿™ä¸ª<code>shared</code>åŒ…å•Šï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿèªæ˜çš„æœ‹å‹å·²ç»è¿˜è®°å¾—ï¼Œä¸Šæ–‡æˆ‘ä»¬åœ¨é…ç½®<code>tsconfig.json</code>æ–‡ä»¶çš„æ—¶å€™ï¼ŒåŸ‹ä¸‹äº†ä¸€ä¸ªä¼ç¬”ã€‚æ²¡é”™ï¼Œå°±æ˜¯æœ€åä¸¤ä¸ªé…ç½®é¡¹ã€‚</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;baseUrl&quot;</span>: <span class="string">&quot;./&quot;</span>,</span><br><span class="line"><span class="string">&quot;paths&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;@vue/*&quot;</span>: [<span class="string">&quot;packages/*/src&quot;</span>]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆï¼Œ<code>baseUrl</code>å¯ä»¥å°†æ ¹è·¯å¾„å®šä½åœ¨å½“é¡¹ç›®çš„æ ¹ç›®å½•ã€‚å…¶æ¬¡<code>paths</code>å¯ä»¥è‡ªå®šä¹‰å¯»æ‰¾åŒ…çš„è·¯å¾„ï¼Œæ¯”å¦‚ä¸Šè¾¹é…ç½®çš„æ„æ€å°±æ˜¯ï¼Œåªè¦<code>import</code>äº†ä»¥<code>@vue/*</code>å¼€å¤´çš„åŒ…ï¼Œé‚£ä¹ˆå°±ä¼šå»<code>packagesæ–‡ä»¶å¤¹ä¸‹çš„*/src</code>ç›®å½•ä¸‹å¯»æ‰¾ã€‚æ‰€ä»¥åŠ ä¸Šäº†è¿™ä¸ªé…ç½®é¡¹ï¼Œæˆ‘ä»¬åœ¨<code>reactiviey/src/index.ts</code>æ–‡ä»¶ä¸­ï¼Œå°±å¯ä»¥æ­£å¸¸çš„å¯¼å…¥<code>shared</code>æ¨¡å—äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reactiviey/src/index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; isArray &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/shared&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isArray</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  isArray</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>pnpm-workspace.yaml</code>æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å…ˆå¡«å†™å¦‚ä¸‹å†…å®¹ï¼Œä»£è¡¨<code>packages</code>æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„ç›®å½•ï¼Œéƒ½å½“åšåŒ…æ¥ç®¡ç†ã€‚</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">packages:</span> </span><br><span class="line">- <span class="comment">&#x27;packages/*&#x27;</span></span><br></pre></td></tr></table></figure>

<p>è‡³æ­¤ï¼Œä¸€ä¸ªç®€å•çš„<code>Monorepo</code>ç¯å¢ƒå°±å·²ç»æ­å»ºå¥½å•¦~ï¼Œé‚£ä¹ˆæœ‰æœ‹å‹å¯èƒ½ä¼šé—®äº†ï¼Œè¿™å’‹è·‘èµ·æ¥ï¼Ÿæˆ‘ä»¬å†™ä¸€ä¸ªåº“è‚¯å®šå¾—è¾¹å†™è¾¹è°ƒè¯•çš„å§ï¼Œéƒ½çœ‹ä¸åˆ°æ•ˆæœï¼Œæ€ä¹ˆçŸ¥é“å†™çš„æœ‰æ²¡æœ‰é—®é¢˜å‘¢ï¼Ÿåˆ«æ€¥ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹èµ°ã€‚</p>
<h3 id="ç¼–å†™è„šæœ¬è¿›è¡Œå¼€å‘ç¯å¢ƒæ‰“åŒ…"><a href="#ç¼–å†™è„šæœ¬è¿›è¡Œå¼€å‘ç¯å¢ƒæ‰“åŒ…" class="headerlink" title="ç¼–å†™è„šæœ¬è¿›è¡Œå¼€å‘ç¯å¢ƒæ‰“åŒ…"></a>ç¼–å†™è„šæœ¬è¿›è¡Œå¼€å‘ç¯å¢ƒæ‰“åŒ…</h3><p>å¯¹äºå¼€å‘ç¯å¢ƒï¼Œæˆ‘ä»¬ä½¿ç”¨<code>esbuild</code>åŒ…è¿›è¡Œæ‰“åŒ…ï¼Œå¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬ä½¿ç”¨<code>rollup</code>è¿›è¡Œæ‰“åŒ…ã€‚ é¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•å…ˆå®‰è£…åŒ…<code>pnpm intall esbuild -D -w</code>ï¼Œä¹‹æ‰€ä»¥åŠ ä¸Š<code>-w</code>æ˜¯ä¸ºäº†èƒ½å¤Ÿè®©ä¾èµ–æˆåŠŸå®‰è£…åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œä¸ç„¶å°±ä¼šæŠ¥é”™ã€‚æˆ‘ä»¬å…ˆæŠŠå…¥å£å†™æˆå›ºå®šä¸º<code>reactivity/src/index.ts</code>ã€‚å…·ä½“çš„é…ç½®ï¼Œå¯ä»¥æŸ¥çœ‹<code>esbuild</code>çš„å®˜æ–¹æ–‡æ¡£ï¼Œä¸‹è¾¹å°±ç›´æ¥å†™ä¸Šéœ€è¦çš„é…ç½®é¡¹ï¼Œå¹¶ç®€å•åšä¸‹æ³¨é‡Šè§£é‡Šã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scripts/dev.js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> &#123; context &#125; = <span class="built_in">require</span>(<span class="string">&#x27;esbuild&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> target = <span class="string">&#x27;reactivity&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">context</span>(&#123;</span><br><span class="line">  <span class="comment">// æ‰“åŒ…å…¥å£</span></span><br><span class="line">  <span class="attr">entryPoints</span>: [path.<span class="title function_">resolve</span>(__dirname, <span class="string">`../packages/<span class="subst">$&#123;target&#125;</span>/src/index.ts`</span>)],</span><br><span class="line">  <span class="attr">outfile</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">`../packages/<span class="subst">$&#123;target&#125;</span>/dist/<span class="subst">$&#123;target&#125;</span>.js`</span>),</span><br><span class="line">  <span class="attr">bundle</span>: <span class="literal">true</span>, <span class="comment">// æŠŠé‡Œæ–‡ä»¶ä¸­çš„ä¾èµ–ä¹ŸåŒæ—¶æ‰“åŒ…è¿›æ¥</span></span><br><span class="line">  <span class="attr">sourcemap</span>: <span class="literal">true</span>, <span class="comment">// ç”Ÿæˆsourcemapï¼Œå¯ä»¥è°ƒè¯•</span></span><br><span class="line">  <span class="attr">format</span>: <span class="string">&#x27;esm&#x27;</span>, <span class="comment">// æ‰“åŒ…å‡ºæ¥çš„æ˜¯esmæ¨¡å—</span></span><br><span class="line">  <span class="attr">platform</span>: <span class="string">&#x27;browser&#x27;</span>,</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">ctx</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œåªè¦å‘ç”Ÿäº†æ”¹åŠ¨ï¼Œå°±é‡æ–°æ‰“åŒ…ç¼–è¯‘ç»“æœ</span></span><br><span class="line">  ctx.<span class="title function_">watch</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;watching~~~&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>package.json</code>æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªå‘½ä»¤ï¼Œè¿›è¡Œæ‰“åŒ…ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;node scripts/dev.js&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹‹åï¼Œæ‰§è¡Œ<code>npm run dev</code>å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨<code>reactivity</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œç”Ÿæˆäº†<code>reactivity.js</code>å’Œ<code>reactivity.js.map</code>ä¸¤ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰“å¼€<code>reactivity.js</code>æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰“åŒ…ç»“æœä¸ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// packages/shared/src/index.ts</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">isArray</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">isArray</span>(value);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// packages/reactivity/src/index.ts</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isArray</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]));</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  isArray</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//# sourceMappingURL=reactivity.js.map</span></span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆæ­¤æ—¶<code>js</code>æ–‡ä»¶å°±å·²ç»è¢«æˆåŠŸçš„æ‰“åŒ…äº†ï¼Œåœ¨<code>dist</code>ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬æ–°å»ºä¸ª<code>index.html</code>æ–‡ä»¶ï¼Œçœ‹çœ‹åˆšæ‰æ‰“åŒ…çš„ç»“æœï¼Œèƒ½ä¸èƒ½åœ¨é¡µé¢ä¸Šç”¨ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- reactivity/dist/index.html --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123; isArray &#125; <span class="keyword">from</span> <span class="string">&#x27;./reactivity.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;index.htmlæ–‡ä»¶ä¸­æµ‹è¯•ä»£ç ï¼š&#x27;</span>, <span class="title function_">isArray</span>([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]))</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç‰¹åˆ«è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>&lt;script&gt;</code>æ ‡ç­¾è¦åŠ ä¸Š<code>type=&quot;module&quot;</code>ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯é€šè¿‡<code>esModule</code>çš„æ–¹å¼è¿›è¡Œå¯¼å…¥å¯¼å‡ºçš„ã€‚æ­¤æ—¶æˆ‘ä»¬è¦å¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼Œæ¥æŸ¥çœ‹<code>index.html</code>æ–‡ä»¶ï¼Œè¿™é‡Œæ–¹å¼å¾ˆå¤šï¼Œæˆ‘æ¨èä½¿ç”¨ä¸€æ¡å‘½ä»¤ï¼Œèƒ½å¤Ÿç›´æ¥å¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä¸éœ€è¦å®‰è£…ä»»ä½•ä¸œè¥¿ã€‚æˆ‘ä»¬<code>cd</code>è¿›å…¥åˆ°<code>reactivity</code>ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ<code>npx serve dist</code>å‘½ä»¤ï¼ˆè¦ä¿è¯npmç‰ˆæœ¬â‰¥5.2æ‰èƒ½å¤Ÿä½¿ç”¨npxï¼‰ï¼Œè¿™å¥—å‘½ä»¤å°±æ˜¯å°†distæ–‡ä»¶å¤¹ä½œä¸ºæœåŠ¡å™¨æ ¹ç›®å½•ï¼Œç„¶åå°†<code>index.html</code>æ–‡ä»¶é»˜è®¤ä½œä¸ºä¸»æ–‡ä»¶å…¥å£è¿›è¡Œå±•ç¤ºï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œå¯ä»¥çœ‹åˆ°é»˜è®¤çš„ç«¯å£æ˜¯3000ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<code>localhost:3000</code>ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œå¯ä»¥å‘ç°è¾“å‡ºäº†2è¡Œä»£ç ï¼Œä¸€ä¸ªæ˜¯<code>reactivity.js</code>æ–‡ä»¶ä¸­è¾“å‡ºçš„ï¼Œä¸€ä¸ªæ˜¯<code>index.html</code>æ–‡ä»¶ä¸­ï¼Œå¯¼å…¥è¿›æ¥è¾“å‡ºçš„ã€‚</p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¼€å‘ç¯å¢ƒçš„åŸºæœ¬æ¶å­ï¼Œå°±æ­å»ºå¥½äº†ï¼Œè‡³äºç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼Œæˆ‘ä»¬ä¹‹åçš„æ–‡ç« ä¼šæåˆ°ï¼Œæ¥ä¸‹æ¥çš„æ–‡ç« ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥å­¦ä¹ ä¸€ä¸‹<code>Vue3</code>çš„å“åº”å¼åŸç†å§!</p>
<p>ä½œè€…ï¼šæŸ æª¬sodaæ°´<br>é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/7195065768231305274">https://juejin.cn/post/7195065768231305274</a><br>æ¥æºï¼šç¨€åœŸæ˜é‡‘<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>

        </div>
        <br />

        <!-- åˆ†äº« -->
        <div id="social-share" class="article-social-share"></div>

        <!-- è¯„è®ºç³»ç»Ÿ -->
        
            <section id="comments" class="comments">
              <!-- å¯ä»¥æ·»åŠ æ ·å¼
              <style>
                .comments{margin:30px;padding:10px;background:#fff}
                @media screen and (max-width:800px){.comments{margin:auto;padding:10px;background:#fff}}
              </style> -->
              <!-- è¯„è®ºç³»ç»Ÿã€‚åœ¨post.ejsä¸­å¼•å…¥ -->
<div class="valine_comment"></div>
<script type="module">
  import { init } from '/js/waline.mjs';
  // import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js'; // åœ¨çº¿url
  init({
    el: '.valine_comment',
    serverURL: 'https://blog.comment.helloallen.cn',
    // serverURL: 'https://allen-blog-vercel.vercel.app', // æœªç»‘å®šåŸŸåçš„è¯„è®ºurlï¼Œåªèƒ½å¤–ç½‘è®¿é—®
  });
</script>
            </section>
        

        
            <section class="post-copyright">
                
                
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/Vue/"># Vue</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <!-- å¦ä¸€ç§çš„ä¸Šä¸€ç¯‡ä¸‹ä¸€ç¯‡ -->
        <!-- <section class="post-nav">
            
                <a class="prev" rel="prev" href="/ae462cc0/">ä»é›¶å¼€å§‹å­¦ä¹ Vue3æºç  ï¼ˆäº”ã€æ‹¾é—ï¼‰</a>
            
            
            <a class="next" rel="next" href="/72108fd/">ä»é›¶å¼€å§‹å­¦ä¹ Vue3æºç ï¼ˆäºŒã€Vue3å“åº”å¼åŸç†ï¼ˆä¸Šï¼‰ï¼‰</a>
            
        </section> -->
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/ae462cc0/"> &laquo; Prev </a>
            
            
                <a class="next" rel="next" href="/72108fd/"> Next &raquo; </a>
            
        </section>


    </article>
</div>

            </div>
            <!-- åˆ†äº« -->
<script src="https://cdn.bootcss.com/social-share.js/1.0.16/js/social-share.min.js" defer></script>
<link href="https://cdn.bootcss.com/social-share.js/1.0.16/css/share.min.css" rel="stylesheet">

<footer id="footer" class="footer">
    <div>
        <span>
            Allen Â© 
                2015 - 
                2024  
        </span> |   <!-- ç«™ç‚¹è®¿é—®é‡ç»Ÿè®¡ã€‚åœ¨footer.ejsä¸­å¼•å…¥ -->
<script async src="/js/busuanzi.pure.mini.js"></script>

<span class="site-uv">
    <i class="iconfont icon-peoplecopy3"></i>
    <span id="busuanzi_value_site_uv"></span>
</span>&nbsp;


<span class="site-pv">
    <i class="iconfont icon-view"></i>
    <span id="busuanzi_value_site_pv"></span>
</span>

 
    </div>
    <div>
        <span>
            Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & Theme by <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a> 
        </span>
    </div>

    <!-- ä¸Šä¸ªç‰ˆæœ¬çš„ç»Ÿè®¡å½“å‰ç«™ç‚¹è¿è¡Œæ—¶é—´ -->
    <!-- <div class="copyright">
        <span>Â© Allen | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
        | <span id="timeDate">loading...</span>
        <span id="times" style="text-align: center;font-size: 12px;">è½½å…¥æ—¶åˆ†ç§’...</span>
    </div> -->
</footer>

<!-- <script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("11/06/2020 00:00:00");//åœ¨æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´ï¼Œæ ¼å¼ï¼šæœˆ/æ—¥/å¹´ æ—¶:åˆ†:ç§’
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "This site has been running for "+dnum+" days "; 
        document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’"; 
    }
    setInterval("createtime()",250);
</script> -->

    </div>

    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
        var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
        (function(){
            var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
            s1.async=true;
            s1.src='https://embed.tawk.to/66b239041601a2195ba16829/1i4k2tesf';
            s1.charset='UTF-8';
            s1.setAttribute('crossorigin','*');
            s0.parentNode.insertBefore(s1,s0);
        })();
    </script>
    <!--End of Tawk.to Script-->
</body>

</html>